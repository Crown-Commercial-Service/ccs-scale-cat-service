language: java
script: mvn package
cache:
  directories:
  - "$HOME/.m2"
branches:
  only:
  - "/^(feature|bugfix)\\/SINF-[0-9]+.*$/"
  - develop
after_success:
- mkdir $HOME/cf-cli
- curl -L "https://packages.cloudfoundry.org/stable?release=linux64-binary&version=v7&source=github"
  | tar -zx -C $HOME/cf-cli
- export PATH=$PATH:$HOME/cf-cli
deploy:
- provider: script
  skip_cleanup: true
  script: CF_ROUTE_PREFIX=sbx- CF_SPACE=sandbox CF_MEMORY=1024M AGREEMENTS_SERVICE_URL=$AGREEMENTS_SERVICE_URL_TST
    AGREEMENTS_SERVICE_API_KEY=AGREEMENTS_SERVICE_API_KEY_TST ROLLBAR_ENV=sandbox
    bash ./deploy.sh
  on:
    all_branches: true
    condition: "${TRAVIS_PULL_REQUEST_BRANCH:-$TRAVIS_BRANCH} =~ ^(feature|bugfix)\\/SINF-[0-9]+.*$"
- provider: script
  skip_cleanup: true
  script: CF_ROUTE_PREFIX=dev- CF_SPACE=development CF_MEMORY=1024M AGREEMENTS_SERVICE_URL=$AGREEMENTS_SERVICE_URL_TST
    AGREEMENTS_SERVICE_API_KEY=AGREEMENTS_SERVICE_API_KEY_TST ROLLBAR_ENV=development
    bash ./deploy.sh
  on:
    branch: develop
env:
  global:
  - secure: h/XLGdkQXNgSpkKkuDBMhf0sMKc6I/gMKfKoILpTlCFSUDmp+9qW3ltrbPi8Q8JZP5VBPsYSPjGFs9l0hEIXN+Bw6Fyaxdj0Opr3eGd55j2FsoPiDRnHImk4Ec9nX7aE4g3xz6tZkr8oPY3H0jtjKxVUS7tM0GQHzivH+z76duMaJ/8IrA60p/RnmEfXGe7LMaXU1Mz7vMjZZO90HkZnhoVIuvLZNaVnIUNFG3Pmcuq6mTEcRDgEzKllfdLbOM0RsHWe76rcMPp7s0TxfEZGTDX3xDgEHHQiHi8v2tK4I4ce4704LgPvOahCn1rj5qtO3X2B6HJkV7WrEMFLvI6RZ8so1tq1zE3MhRhxmIKcxUhe7iec1YifBwn5/sLMn5pA8bbSoXXRRhkY+eXAgfl3LJ+3qRAiiYgn6AKqCICLif7EW02kTyw1MMocwGWbLky5pN+aEvZI5XxuejZWuja/X392brH4qBJtIfPh2pjfp9IZyzrTp6WG02g0YxvUa4MtoOnEDmDm4d3bQwKN4oMHjS8Vblw5W6Z0Mi1XHaO5pF0c/XN3yWNxHFTOzbaohONBC1wIzRybX/HI0ELHixpoAiFi3xIQptDtY5C0SzWReR2VWbIzzL2DdfpYGAs/JAq1VAe3IhHLDAIaEN7yFkWrlDp3QMnhGkGJY5d6JahY99o=
  - secure: d0lw/XSURxDpEZMB6HrK7KqX3Eh8tPCeyCz15sO6MAhFr02XrLYbmU/T6agyn1WeGgG9FGQ8zKNATP+gv84pBwi1RWsSFJr4Qkjqzy0bGjPz63gbK7giwthIF6oh9G+l9cueTEQ4nX4+xgN0O2h+RTo49SjRXOTHIChtDisma1i0Np1wdanDaiJXC+VidB+n7cUiW5KNdGMpaNyTaPIkvc+R/bGv8YS3lc4whPGUdqXGd1TZ2IHHk3U9dmuU33vcncKraqcWQHs/ZafeaP+fkVCdT8OthbHtsAIWaeNUDVQ5i6SV75icXaeu/xoXDLWqAfjwUyLfWyZBY0UjnmA4oE/a15pC2QQxFnudbMqKEZXiec4KBhFasOjHGbYqk1cl0a2nuUHS7Ei/vLgtQfHyoYwPlqSh3qkYZPqwQTIXW0C+0s101adzOx5g0WzpdzzwaXRhc+A9pOmn4rnHIWTNfJ9uuaWx9i0sywkeJ6vETROWyH6+w2Oqrtex8uOb0b3yugAGHvT3ObIX4OQv1Z337jL6DCJfEV1dMA9c1UP3YMjo9KL9bdWynsGpNEB//flJPJOpjYqxNk2SEoUOyGNzklW63R4gN44EHLmks7I99RiETnttlf/iwyTFDDTYLIjlwE/N395hlKRgrN+TyDi6sm5+BLkZEIDbNNutFRcN9Iw=
  - secure: Toz+6zggg5ZmmOaGRfCSAdq73NAN+Wu6fNtJXzDBZRp8K8fq7wVU1VqAFbUHxI9X9dGHti0blFNCcJok4gb3d4dGH4HahDpagx7sDhtRdsBVaGstey9/eIjufvXrSN2zBw98CdqEx0ImFec9Fu9T0BlnBVY7izFY5ci3yXTuqXfe48sfOe4KvXFn3kftDPeTmbZ1ueq8RhDlohixwmWMs7ceeNgFRS1x//Uliu7LCBNzRVUo0l9t4WghbmqILYIWpJB+ZCQpY/Zut7EGKEYIh1dNkkV6S+RPCh52y1+D5z2TNFrTXzoUcWJh7QTQkm7YmJc+Y87yxvFQ54KzzJZcufQxHEbdmvL/l70b2NztorNurCbJwLj9bH0ugq9o9ZI/hVtIx6K5i15Ls+z3B7B1ISFCRyT5xB4IDixZTXgFxY21PZDSV5lSqjMUyxOxm1uuUFYeeZWzyAxj1HVVUEMSCvFk+6WcQVJTELwq604lHjaT9pBiiCmAxwB745snCOIc6hv76pzsia0kyBn5XM88Z8afekxOfPxNQje1Pyl9eZZL3po+uDjd7Z1GJK2UlwYK+Rw6ezLAoVo7+7ALWJVcOOwK2A5TO5ijogq3E4+/XhBIgAFiVIUBWd8rMkQd9aG4SRfOP54wka2GbUzyLtRq93lynAxBTpG3ydEaRbrz/Y4=
  - secure: qUcg8reEhs87ookT57ckvWQGYniXJGa9SQBdDym4VZqPyyDC5uSUQW7KzfNBuE16Cj1kFaWwuEL/EuySoPEt9iZlBOn3k6BV4+JVhqwAN0nwG3RuxUMZOLYIjjHtcvSFGGq7Q208h5DUnZzPpOZ7YJwmWxXM0Bq82k6JPpl8OYW51NM/Qizzw66tsm6q6M7FENyLaj5Zbexh0YSTgVBcB25cbuZ0r9mN9RkbSOkaHHEIU5c9mmhv3Ag/rJgPF/MsgibEcPNVQWMwKUVh9Oq4y3WK5iAT2A7kqk+SUe5CfMrkLIA6JmbxIawBytdV9XnqBcKJJzKekBjBY72pHykobBTlGj0pr3FzcQHDy/adw+kMic9dKpJ5GlqM3Og+02rYy5h5gwM7bObtdU/fJDNpQkLRSyBFiA3nJSGvfiBbZ6yLjKGt6Wf4K+CG9VadJWt9BEWFx0vNLU1aw+bbArkmhaTO7XJg0L3A2PHOg7feHp0MY9SH+JpzbugMDi51o8JjVgd1NywLJuWCOCWOzQNp2X7mJnw5fjsrVtN+TigXGrdwKH/nV6AzEi+Up6teO/T5Ejh3kGmfapSixsPHTAnQcrtSvxtzr9jb6/3wS9QGrPcxWZQMDd6EaTH/exc7y5wycVUVWheFgR0J+XZKOsCdLq5QgIX65B2xlWAjXxAClY8=
  - secure: zklx5aGyNe6MIdSMSgvDLg/xbPH/z/aaxZ8zzG8fbHwB0FgjuIQFgvYitEkN8xeHHS7F1dG2OZQgoBg0sEco80jvwJx7+I+4BsxBgyK+UzSKYGdpUA5yNJX5E/e4y+Ro3EW6KmO8pmZZQjcA0GGEdW8Mfs0Rb8xe8fk6vZvlTPfgOueWotx4ciQfC/bnWjDhc3nVEiyoRzDebIoKGB14CItpUPfVsIEg4EFmfJxHv1X6s6iGnlwbE8zwF7FleErcOgRjg+k93f6NCkkuZFvdGME/Wzhdcs22pzQ6UNWCT7hH835D47ruvcx9rIC415P4xgaBBuf6kgHD/7dJvuaLtWNXPyc4a9GYpAg/6LXyeHxwpNcme5EmuSQ9wm6CtjDK9J9+5+Itlwj9TbXICyn1UPrV+m13ADDPnWj2nn5Mre+kaI7TZCtjlJM3gbKBTNSM7pePy5kt63MDSFIL+hiILDDCLT5tgLZpdec+Iab34emyFjp9vH4CN5kk80oMkWQcPEPoMNSpOmT0xBW4niqvfY//JA7N1GiV81BBfYPa6rVwQB+0l091xG6VyUcvGek11os+h0BVtrzf/PkLK40fryQH8Wjs3DJ644O86I3Zi6Ju0unrXXsbtQfrwxRkMbxWWNwW0QCNsE20BLJetBsBPUAORrl+EG3NU5NkKVGlwkI=
