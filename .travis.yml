language: java
script: mvn package
cache:
  directories:
  - "$HOME/.m2"
branches:
  only:
  - "/^(feature|bugfix)\\/SINF-[0-9]+.*$/"
  - develop
after_success:
- mkdir $HOME/cf-cli
- curl -L "https://packages.cloudfoundry.org/stable?release=linux64-binary&version=v7&source=github"
  | tar -zx -C $HOME/cf-cli
- export PATH=$PATH:$HOME/cf-cli
deploy:
- provider: script
  skip_cleanup: true
  script: CF_ROUTE_PREFIX=sbx- CF_SPACE=sandbox CF_MEMORY=1024M AGREEMENTS_SERVICE_URL=$AGREEMENTS_SERVICE_URL_TST
    AGREEMENTS_SERVICE_API_KEY=AGREEMENTS_SERVICE_API_KEY_TST ROLLBAR_ENV=sandbox
    bash ./deploy.sh
  on:
    all_branches: true
    condition: "${TRAVIS_PULL_REQUEST_BRANCH:-$TRAVIS_BRANCH} =~ ^(feature|bugfix)\\/SINF-[0-9]+.*$"
- provider: script
  skip_cleanup: true
  script: CF_ROUTE_PREFIX=dev- CF_SPACE=development CF_MEMORY=1024M AGREEMENTS_SERVICE_URL=$AGREEMENTS_SERVICE_URL_TST
    AGREEMENTS_SERVICE_API_KEY=AGREEMENTS_SERVICE_API_KEY_TST ROLLBAR_ENV=development
    bash ./deploy.sh
  on:
    branch: develop
env:
  global:
  - secure: h/XLGdkQXNgSpkKkuDBMhf0sMKc6I/gMKfKoILpTlCFSUDmp+9qW3ltrbPi8Q8JZP5VBPsYSPjGFs9l0hEIXN+Bw6Fyaxdj0Opr3eGd55j2FsoPiDRnHImk4Ec9nX7aE4g3xz6tZkr8oPY3H0jtjKxVUS7tM0GQHzivH+z76duMaJ/8IrA60p/RnmEfXGe7LMaXU1Mz7vMjZZO90HkZnhoVIuvLZNaVnIUNFG3Pmcuq6mTEcRDgEzKllfdLbOM0RsHWe76rcMPp7s0TxfEZGTDX3xDgEHHQiHi8v2tK4I4ce4704LgPvOahCn1rj5qtO3X2B6HJkV7WrEMFLvI6RZ8so1tq1zE3MhRhxmIKcxUhe7iec1YifBwn5/sLMn5pA8bbSoXXRRhkY+eXAgfl3LJ+3qRAiiYgn6AKqCICLif7EW02kTyw1MMocwGWbLky5pN+aEvZI5XxuejZWuja/X392brH4qBJtIfPh2pjfp9IZyzrTp6WG02g0YxvUa4MtoOnEDmDm4d3bQwKN4oMHjS8Vblw5W6Z0Mi1XHaO5pF0c/XN3yWNxHFTOzbaohONBC1wIzRybX/HI0ELHixpoAiFi3xIQptDtY5C0SzWReR2VWbIzzL2DdfpYGAs/JAq1VAe3IhHLDAIaEN7yFkWrlDp3QMnhGkGJY5d6JahY99o=
  - secure: d0lw/XSURxDpEZMB6HrK7KqX3Eh8tPCeyCz15sO6MAhFr02XrLYbmU/T6agyn1WeGgG9FGQ8zKNATP+gv84pBwi1RWsSFJr4Qkjqzy0bGjPz63gbK7giwthIF6oh9G+l9cueTEQ4nX4+xgN0O2h+RTo49SjRXOTHIChtDisma1i0Np1wdanDaiJXC+VidB+n7cUiW5KNdGMpaNyTaPIkvc+R/bGv8YS3lc4whPGUdqXGd1TZ2IHHk3U9dmuU33vcncKraqcWQHs/ZafeaP+fkVCdT8OthbHtsAIWaeNUDVQ5i6SV75icXaeu/xoXDLWqAfjwUyLfWyZBY0UjnmA4oE/a15pC2QQxFnudbMqKEZXiec4KBhFasOjHGbYqk1cl0a2nuUHS7Ei/vLgtQfHyoYwPlqSh3qkYZPqwQTIXW0C+0s101adzOx5g0WzpdzzwaXRhc+A9pOmn4rnHIWTNfJ9uuaWx9i0sywkeJ6vETROWyH6+w2Oqrtex8uOb0b3yugAGHvT3ObIX4OQv1Z337jL6DCJfEV1dMA9c1UP3YMjo9KL9bdWynsGpNEB//flJPJOpjYqxNk2SEoUOyGNzklW63R4gN44EHLmks7I99RiETnttlf/iwyTFDDTYLIjlwE/N395hlKRgrN+TyDi6sm5+BLkZEIDbNNutFRcN9Iw=
  - secure: MHLhyXktiokS4PxBx0bMSdTtI2c9M8b53eBoWhC+BBPZVBx+jRXI831IhlB+vnYVSmNUD3cQhlDWa1CVFr7jrF7fi7vrVZwN6uzXoLiI+K8FJIBeZEYrPQkDi2sd8MjvZytphcJY1iTPJ26coDenhJ5AE4XGnXaI8FlSCUzq2RDI0fCkrZ6QQsjR5JO9ecKi+wjnNUbKRbrtoqyujASdpc7XMQZYPKYDOZIDA5SM/tOQ576la7xVAWh4wxH+M2vFi3vtd/Gq0RRVDyyKi0DKh8Qi3jDoMQLU1/IsJ8RQB7/H0qMZI4FOK4IRhQ8dexl8PpXLokQKeSezQsqz2F0qhLJeUP9jaZLj1eAYqan5BtZOzo211Wrl4Tvg2taxWshCqKLMaP3/EG7Lcl1Ov8GpzkvokyMngTBWUg9Z1COePa9Qx1cOUbAYWq7qnTAL+26CvBcJchopRnpTGP8gcsBhlbXzgd6wzLAdvxCMmH3wlmfoDSjE9cjXRzV0pTDaz2a8IP+KfpY68Mr9npG8An/OKPjQxNSaT0vI/pMIrOhPQjmvmws8QTisL8ie4ZCt9EX43LmaXqY+iVJwStpsEiXL3KzksB3PH43n6Km9aA7aIOeDsu+ceoOxsNfNJ2uSvEtAdwLSFGQscKUP0xUg1psMPBokjHTeTvF7W7rGfAodbeI=
  - secure: QC+gOQwZnWUwtv9XcJW9T5RFGxIcrLtBoXAsfYoAHsK4ufXg1giDxKCGcq65lsxaKooNPFoiCfxHtKrdpd+fn2gq834dLZUECoXBGSjYppNybNR4gPiKNkqhMUrqUhcbg3GY2WZmBrVPhHBRhiak+mEYiXWREP4mxxaKDg2v2+bjX9Lq8TeIPO5tICVyyUokJaAW3KxCFLRfhz2JjbVOGS13wJgotXWXepIrWumERBvZHsJG1hfv0D8nJRWpkMaXmezKZHTsjV0L/nE+kZ5HRv525WNMjgPGSaxyOJwKt9aD8N2ksSblUu9aOU+sFtuk5lj9u2VRiBivQzZadrNBHJa7zxcvleIqk1PB5Bq64+A2p/xMijTWxGCedj2SI11N2rb+693Fd933bBPmsO0/M9uWy4EaHZmX1qIXhqdIAZZJzj7KUSAnjKHFRr9JfieZR/W7BSIQd7izzeFnTu89TQNg6yVkdO7IzO61m6ncipXv1yQHmZu5dpAmdbffUihyMSIMVw0VH9QvooDB/au/pdYraPyXjRoo1Y0vqfRa2rJBVsVuct1DywL4CWzX7sRZ0oOf6UVvjscc6g3NmVDKnlAE0NBS/1ikD47oRo+38ifrXdtZlCcajH0KPN2zh/PjOglth1+pDhrQfQAxCf/SpHkQIJm5T16ZMgHLVG17CA0=
  - secure: LFuNk8NXKUQs5hhUDOGxqqwz7Yx++Qvg72zwUq0Z7usE5Iuau+s3rhl7X/+MaKHbHRBIIkWnuOthtSdCpMOr7ja2ZNYVHBVf4D5Bp6jtzcLWD4Fae1W9LLR2nM9Hf6CupW4TN7L3S2bxQYQyLJr91vn2ma5La7JNv3jT0B+vtpYPvoVIrSrfuGW4Wiwq3E8LpI54+yG5NrcUiGAg/j7K02TTEH6q/j5ofVpHCWKTw19FZv0NyijgFVph2LufXtl7fK3MBQo5/MDWYzlyyQLvIyMevp6u2/yckfwyPbW191sQxK+vAYN5Gf1asBIk2KuL2Y+Usnrdgk9w1RUHhzBiEIp1iY5ZVaEkbWNkhZOoBVHYNbjGuNHECcz4fINIvtWxxSOLotRBXuD4iWw5LDbcuQRQAiVnkbPtCQmE38cDDxLkv9KWm+H5EaBub5I6LZfsjUMIjXZxhqdwyc53lnHhIVOHhKAKZ0slmGt1xL5dKep11kzNqKgsQUnneKm5EiItZYVrzpCJTKxlfUImbsnkEjoVeB0PQ+yzHcGi4khKOYIBDkIp7Fmlg/YiRYDrrzFl4r9YHUAZx7qX4joJLoCZXX1e5slXWJ4rSyRHdgvtOtUeOn0xfj5lM8Er5glF5/fwt7ILAxsuGoLeOwilBbev57G6VIrVOE9JUyuvwGEwD8g=
